import{t as o}from"./micro-task.ZxAilEVg.js";function s(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function u(){return/Android/gi.test(window.navigator.userAgent)}function l(){return s()||u()}function d(){let i=[],r={addEventListener(t,e,n,a){return t.addEventListener(e,n,a),r.add(()=>t.removeEventListener(e,n,a))},requestAnimationFrame(...t){let e=requestAnimationFrame(...t);r.add(()=>cancelAnimationFrame(e))},nextFrame(...t){r.requestAnimationFrame(()=>{r.requestAnimationFrame(...t)})},setTimeout(...t){let e=setTimeout(...t);r.add(()=>clearTimeout(e))},microTask(...t){let e={current:!0};return o(()=>{e.current&&t[0]()}),r.add(()=>{e.current=!1})},style(t,e,n){let a=t.style.getPropertyValue(e);return Object.assign(t.style,{[e]:n}),this.add(()=>{Object.assign(t.style,{[e]:a})})},group(t){let e=d();return t(e),this.add(()=>e.dispose())},add(t){return i.push(t),()=>{let e=i.indexOf(t);if(e>=0)for(let n of i.splice(e,1))n()}},dispose(){for(let t of i.splice(0))t()}};return r}export{l as n,d as o,s as t};
